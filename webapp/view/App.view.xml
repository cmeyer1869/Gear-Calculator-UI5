<mvc:View 
	displayBlock="true" 
	xmlns:mvc="sap.ui.core.mvc" 
	xmlns:core="sap.ui.core" 
	xmlns:l="sap.ui.layout" 
	xmlns:f="sap.ui.layout.form"
	xmlns="sap.m" 
	xmlns:wt="dirk.gears.control"
	xmlns:app="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1" 
	controllerName="dirk.gears.controller.App">
	<App>
			<Page 
				title="Gear Calculator" 
				id="gearCalculatorPage"
				class="sapUiContentPadding"
				>
				<headerContent>
					<Button icon="sap-icon://question-mark" tooltip="Menu" />
					<Button icon="sap-icon://action-settings" tooltip="Config" />
				</headerContent>
				<content>
				<VBox width="100%">
					<wt:GearGraphics
						id="gearGraphics"
						width="100%"
						height="220px"
						value="{/displayData/maxChainAngle}" 
						cadence="{/gearData/cadence}"
						circumference="{/gearData/circumference}"
						circumference2="{/gearData2/circumference}"
						tireName="{/gearData/tireName}"
						chainrings="{/gearData/chainrings}"
						cogs="{/gearData/cogs}"
						chainrings2="{/gearData2/chainrings}"
						cogs2="{/gearData2/cogs}"
						hubType="{/gearData/hubId}"
						hubName="{/gearData/name}"
						hubRatios="{/gearData/ratios}"
						hubRatios2="{/gearData2/ratios}"
						minHubRatio="{/gearData/minRatio}"
						dsplValues="{/displayData/displayValueId}"
						unitsIndex="{/displayData/unitsIndex}"
						maxChainAngle="{/displayData/maxChainAngle}"
						visible="true"
						select="onGraphicsSelected"/>
					<wt:GearGraphics
						id="gearGraphics2"
						width="100%"
						height="220px"
						value="{/displayData/maxChainAngle}" 
						cadence="{/gearData/cadence}"
						circumference="{/gearData2/circumference}"
						circumference2="{/gearData/circumference}"
						tireName="{/gearData2/tireName}"
						chainrings="{/gearData2/chainrings}"
						cogs="{/gearData2/cogs}"
						chainrings2="{/gearData/chainrings}"
						cogs2="{/gearData/cogs}"
						hubType="{/gearData2/hubId}"
						hubName="{/gearData2/name}"
						hubRatios="{/gearData2/ratios}"
						hubRatios2="{/gearData/ratios}"
						minHubRatio="{/gearData2/minRatio}"
						dsplValues="{/displayData/displayValueId}"
						unitsIndex="{/displayData/unitsIndex}"
						maxChainAngle="{/displayData/maxChainAngle}"
						visible="{/displayData/compare}"
						select="onGraphicsSelected"/>
					<wt:GearControls 
						id="chainringControls" 
						sprockets="{chainrings}"
						nsprockets="3"
						sprocketType="chainring"
						minteeth="20"
						maxteeth="64"
						width="100%"
						height="50px"/>
					<wt:GearControls 
						id="cogControls" 
						sprockets="{cogs}"
						nsprockets="12"
						sprocketType="cog"
						minteeth="9"
						maxteeth="50"
						width="100%"
						height="50px"/>
				<f:Form id="GearDataForm"
					editable="true"
					width="100%">
					<f:layout>
						<f:ResponsiveGridLayout
							labelSpanXL="4"
							labelSpanL="4"
							labelSpanM="4"
							labelSpanS="12"
							adjustLabelSpan="false"
							emptySpanXL="0"
							emptySpanL="0"
							emptySpanM="0"
							emptySpanS="0"
							columnsXL="3"
							columnsL="3"
							columnsM="2"
							columnsS="2"
							breakpointM="400"
							singleContainerFullSize="false" />
					</f:layout>
					<f:formContainers>
						<f:FormContainer>
							<f:formElements>
								<f:FormElement label="{i18n>gearing}">
									<f:fields>
										<Select
											id="selectGears"
											selectedKey="{hubId}"
											items="{
												path: 'gears>/HubData'
											}" 
											change=".onGearSelected">
											<core:Item key="{gears>id}" text="{gears>name}" />
										</Select>
									</f:fields>
								</f:FormElement>
								<f:FormElement label="{i18n>chainrings}">
									<f:fields>
										<Select
											id="selectChainringSet"
											selectedKey="{chainringSet}"
											items="{
												path: 'gears>/ChainringSets'
											}" 
											change=".onChainringSetSelected">
											<core:Item key="{gears>name}" text="{gears>name}" />
										</Select>
									</f:fields>
								</f:FormElement>
								<f:FormElement label="{i18n>cogs}">
									<f:fields>
										<Select
											id="selectCogSet"
											selectedKey="{cogSet}"
											items="{
												path: 'gears>/CogSets'
											}" 
											change=".onCogSetSelected">
											<core:Item key="{gears>name}" text="{gears>name} {gears>description}" />
										</Select>
									</f:fields>
								</f:FormElement>
							</f:formElements>
						</f:FormContainer>
						<f:FormContainer>
							<f:formElements>
								<f:FormElement label="{i18n>tire_size}">
									<f:fields>
										<ComboBox
											id="selectTires"
											selectedKey="{/gearData/tireSize}"
											items="{
												path: 'gears>/TireSizes'
											}"
											showSecondaryValues = "true"
											selectionChange="onTireSizeSelected"
											>
											<core:ListItem key="{gears>size}" text="{gears>inch} / {gears>ETRTO}" additionalText="{gears>description}"/>
										</ComboBox>
										<Input
											type="Number"
											value="{/gearData/circumference}"
											maxLength="4">
										</Input>
									</f:fields>
								</f:FormElement>
								<f:FormElement label="{i18n>displayValue}">
									<f:fields>
										<Select
											id="selectDisplayValue"
											selectedKey="{/displayData/displayValueId}"
											items="{
												path: '/displayData/displayValues'
											}" 
											change=".ondisplayValueSelected">
											<core:Item key="{id}" text="{name}" />
										</Select>
									</f:fields>
								</f:FormElement>
								<f:FormElement label="{i18n>units}">
									<f:fields>
										<RadioButtonGroup 
											id="selectUnits"
											columns="2"
											selectedIndex="{/displayData/unitsIndex}">
											<RadioButton text="{i18n>metric}" />
											<RadioButton text="{i18n>imperial}" />
										</RadioButtonGroup>
									</f:fields>
								</f:FormElement>
							</f:formElements>
						</f:FormContainer>
						<f:FormContainer>
							<f:formElements>
								<f:FormElement label="{i18n>cadence}">
									<f:fields>
										<Slider 
											id="selectCadence"
											min="60" 
											max="120" 
											step="5"
											enableTickmarks="true" 
											value="{/gearData/cadence}">
											<ResponsiveScale tickmarksBetweenLabels="2"/>
										</Slider>
									</f:fields>
								</f:FormElement>
								<f:FormElement label="{i18n>maxChainAngle}">
									<f:fields>
										<Slider 
											id="selectMaxChainAngle"
											min="1.5" 
											max="3.5" 
											step="0.1"
											enableTickmarks="true" 
											value="{/displayData/maxChainAngle}">
											<ResponsiveScale tickmarksBetweenLabels="2"/>
										</Slider>
									</f:fields>
								</f:FormElement>
								<f:FormElement label="">
									<f:fields>
										<ToggleButton id="btnCompare" text="{i18n>compare}" enabled="true" pressed="{/displayData/compare}" press="onPress" />
									</f:fields>
								</f:FormElement>		
							</f:formElements>
						</f:FormContainer>
					</f:formContainers>
				</f:Form>
				</VBox>
				</content>
		<footer>
			<Toolbar>
			<Label text="Â© Dirk Feeken"/>
				<ToolbarSpacer/>
			<Label text="Build with OpenUI5"/>	
				<Image
					src="https://ui5.sap.com/resources/sap/ui/documentation/sdk/images/logo_ui5.png"
					activeSrc="openui5.org"
					densityAware="false"/>
				<!--Button text="Accept" type="Accept" />
				<Button text="Reject" type="Reject" />
				<Button text="Edit" />
				<Button text="Delete" /-->
			</Toolbar>
		</footer>
			</Page>

	</App>
</mvc:View>